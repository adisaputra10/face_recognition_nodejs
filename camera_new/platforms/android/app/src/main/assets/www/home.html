<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width, height=device-height, target-densitydpi=device-dpi" />
    <title>Camera</title>
    <link rel="stylesheet" type="text/css" href="css/index.css" />
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
  </head>
  <body>
    <div class="controls">
      <div class="block">
        <button id="startCameraAboveButton">Start Camera</button>
        <button id="stopCameraButton">Stop Camera</button>
      </div>
      <div class="block">
        <button id="takePictureButton">Take Picture</button>
        <button id="switchCameraButton">Switch Camera</button>
      </div>
      
    </div>
    <div class="pictures">
      <img id="originalPicture" width="200"/>
    </div>
    <button id="simpanfoto">Recognize </button><br>
    <button id="backtomainmenu">Back To Main Menu</button>

    <p id="geolocation">Finding geolocation...</p>

    <script type="text/javascript" src="cordova.js"></script>
    <script type="text/javascript" src="CameraPreview.js"></script>
    <script type="text/javascript" src="js/camera.js"></script>
    <script>
      $('document').ready(function(){
          $('#simpanfoto').on('click', function(){
              get_image = $('#originalPicture').attr('src');
              $.ajax({
                url : 'http://34.70.135.128:2000/uploadimage',
                type : 'POST',
                data : { 
                  base64image : get_image
                },
                success : function(resp){
                  alert('sukses ')

                },
                error: function (request, status, error) {
                    alert('error ');
                }
              });
          });

          $('#backtomainmenu').on('click', function(){

            //navigator.geolocation.getCurrentPosition(onSuccesss, onErrors);
            CameraPreview.stopCamera();
            window.location.href = "index.html";
          });
      });
    </script>




<script>

    
    
    function onSuccesss(position) {
            var element = document.getElementById('geolocation');
            element.innerHTML = 'Latitude: '           + position.coords.latitude              + '<br />' +
                                'Longitude: '          + position.coords.longitude             + '<br />' +
                                'Altitude: '           + position.coords.altitude              + '<br />' +
                                'Accuracy: '           + position.coords.accuracy              + '<br />' +
                                'Altitude Accuracy: '  + position.coords.altitudeAccuracy      + '<br />' +
                                'Heading: '            + position.coords.heading               + '<br />' +
                                'Speed: '              + position.coords.speed                 + '<br />' +
                                'Timestamp: '          +                                   position.timestamp          + '<br />';
        }
    
        // onError Callback receives a [PositionError](PositionError/positionError.html) object
        //
        function onErrors(error) {
            alert('code: '    + error.code    + '\n' +
                  'message: ' + error.message + '\n');
        }
    
    
    
    
    </script>




  </body>
</html>
